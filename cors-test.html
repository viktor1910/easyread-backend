<!DOCTYPE html>
<html>
  <head>
    <title>CORS Test</title>
  </head>
  <body>
    <h1>CORS Test for Categories API</h1>
    <button onclick="testCORS()">Test Categories API</button>
    <div id="result"></div>

    <script>
      async function testCORS() {
        const resultDiv = document.getElementById("result");
        resultDiv.innerHTML = "Testing...";

        try {
          const response = await fetch("http://127.0.0.1:8000/categories/", {
            method: "GET",
            headers: {
              Accept: "application/json",
            },
          });

          if (response.ok) {
            const data = await response.json();
            resultDiv.innerHTML = `
                        <h3>Success! CORS is working</h3>
                        <p>Status: ${response.status}</p>
                        <p>Response: ${JSON.stringify(data, null, 2)}</p>
                    `;
          } else {
            resultDiv.innerHTML = `
                        <h3>Error: ${response.status}</h3>
                        <p>${await response.text()}</p>
                    `;
          }
        } catch (error) {
          resultDiv.innerHTML = `
                    <h3>CORS Error</h3>
                    <p>${error.message}</p>
                    <p>This likely means CORS is not properly configured.</p>
                `;
        }
      }
    </script>
  </body>
</html>
